<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Friends Chat App</title>
<style>
  /* Reset and base */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    background: #121212;
    color: #ddd;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  /* Login overlay */
  #loginOverlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.85);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  #loginBox {
    background: #222;
    padding: 2rem;
    border-radius: 10px;
    width: 90%;
    max-width: 320px;
    box-shadow: 0 0 15px #0ff;
  }
  #loginBox h2 {
    margin-top: 0;
    margin-bottom: 1rem;
    text-align: center;
    color: #0ff;
  }
  #loginBox label {
    display: block;
    margin: 0.5rem 0 0.2rem;
  }
  #loginBox input {
    width: 100%;
    padding: 0.5rem;
    border-radius: 6px;
    border: none;
    outline: none;
    font-size: 1rem;
  }
  #loginBox button {
    width: 100%;
    margin-top: 1.2rem;
    padding: 0.6rem;
    background: #0ff;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    color: #111;
    font-size: 1.1rem;
    transition: background-color 0.3s ease;
  }
  #loginBox button:hover {
    background: #0cc;
  }
  #loginError {
    color: #f66;
    font-size: 0.9rem;
    text-align: center;
    margin-top: 0.5rem;
    min-height: 1.2rem;
  }

  /* Main container */
  #app {
    width: 100%;
    max-width: 700px;
    flex: 1;
    display: none; /* show after login */
    flex-direction: column;
    padding: 1rem;
  }

  /* Menu */
  #menu {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
  }
  #menu button {
    background: #0ff;
    border: none;
    padding: 0.6rem 1.2rem;
    font-weight: 700;
    border-radius: 8px;
    cursor: pointer;
    color: #111;
    flex-grow: 1;
    min-width: 90px;
    transition: background-color 0.3s ease;
  }
  #menu button.active {
    background: #0cc;
  }
  #menu button:hover:not(.active) {
    background: #19e;
    color: #eee;
  }

  /* Sections */
  section {
    display: none;
    background: #222;
    padding: 1rem;
    border-radius: 10px;
    min-height: 350px;
    overflow-y: auto;
  }
  section.active {
    display: block;
  }

  /* Chat styles */
  #chat #usernameDisplay {
    font-size: 1.1rem;
    margin-bottom: 0.8rem;
    text-align: center;
    color: #0ff;
  }
  #chat #messages {
    background: #111;
    border-radius: 8px;
    height: 250px;
    overflow-y: auto;
    padding: 1rem;
    font-size: 1rem;
    margin-bottom: 1rem;
    color: #eee;
  }
  #chat #messages div {
    margin-bottom: 0.6rem;
    word-wrap: break-word;
  }
  #chat form {
    display: flex;
    gap: 0.5rem;
  }
  #chat input[type="text"] {
    flex-grow: 1;
    padding: 0.5rem;
    border-radius: 6px;
    border: none;
    font-size: 1rem;
  }
  #chat button {
    background: #0ff;
    border: none;
    border-radius: 6px;
    padding: 0.5rem 1rem;
    font-weight: 700;
    cursor: pointer;
    color: #111;
    transition: background-color 0.3s ease;
  }
  #chat button:hover {
    background: #0cc;
  }

  /* Pictures section */
  #pictures form {
    margin-bottom: 1rem;
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }
  #pictures input[type="file"] {
    flex-grow: 1;
  }
  #pictures button {
    background: #0ff;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 700;
    color: #111;
    transition: background-color 0.3s ease;
  }
  #pictures button:hover {
    background: #0cc;
  }
  #pictureList {
    max-height: 300px;
    overflow-y: auto;
  }
  .picture-item {
    margin-bottom: 1rem;
    background: #111;
    padding: 0.5rem;
    border-radius: 6px;
  }
  .picture-item img {
    max-width: 100%;
    border-radius: 6px;
    margin-bottom: 0.3rem;
  }
  .comments {
    font-size: 0.9rem;
    color: #aaa;
  }
  .comments input[type="text"] {
    width: 100%;
    border-radius: 5px;
    border: none;
    padding: 0.3rem;
    margin-top: 0.3rem;
    font-size: 0.9rem;
  }
  .comments button {
    margin-top: 0.3rem;
    background: #0ff;
    border: none;
    padding: 0.3rem 0.8rem;
    border-radius: 5px;
    cursor: pointer;
    color: #111;
    font-weight: 700;
    font-size: 0.85rem;
  }
  .comments button:hover {
    background: #0cc;
  }

  /* Settings section */
  #settings label {
    display: block;
    margin-bottom: 0.3rem;
    font-weight: 600;
  }
  #settings input[type="file"] {
    margin-bottom: 1rem;
  }
  #profilePreview {
    max-width: 150px;
    max-height: 150px;
    border-radius: 50%;
    display: block;
    margin-bottom: 1rem;
    border: 3px solid #0ff;
  }

  /* Votes section */
  #votes h3 {
    margin-top: 0;
  }
  #votes ul {
    list-style: none;
    padding: 0;
  }
  #votes li {
    background: #111;
    margin: 0.4rem 0;
    padding: 0.6rem 1rem;
    border-radius: 8px;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  #votes li:hover {
    background: #0cc;
  }
  #votes li.voted {
    background: #0ff;
    color: #111;
    font-weight: 700;
  }

  /* Responsive */
  @media (max-width: 480px) {
    #menu {
      flex-direction: column;
    }
    #menu button {
      width: 100%;
      min-width: unset;
    }
  }
</style>
</head>
<body>

<!-- Login overlay -->
<div id="loginOverlay">
  <div id="loginBox">
    <h2>Login</h2>
    <label for="usernameInput">Username</label>
    <input id="usernameInput" autocomplete="off" />
    <label for="passwordInput">Password</label>
    <input id="passwordInput" type="password" autocomplete="off" />
    <button id="loginBtn">Log In</button>
    <div id="loginError"></div>
  </div>
</div>

<!-- Main app -->
<div id="app">

  <!-- Menu -->
  <div id="menu">
    <button data-section="chat" class="active">Chat</button>
    <button data-section="pictures">Pictures</button>
    <button data-section="settings">Settings</button>
    <button data-section="votes">Votes</button>
  </div>

  <!-- Chat section -->
  <section id="chat" class="active">
    <div id="usernameDisplay"></div>
    <div id="messages"></div>
    <form id="messageForm">
      <input id="messageInput" placeholder="Type your message..." autocomplete="off" />
      <button type="submit">Send</button>
    </form>
  </section>

  <!-- Pictures section -->
  <section id="pictures">
    <form id="pictureForm">
      <input type="file" id="pictureFile" accept="image/*" />
      <button type="submit">Post Picture</button>
    </form>
    <div id="pictureList"></div>
  </section>

  <!-- Settings section -->
  <section id="settings">
    <label for="profilePicInput">Upload Profile Picture:</label>
    <input type="file" id="profilePicInput" accept="image/*" />
    <img id="profilePreview" alt="No profile picture" />
  </section>

  <!-- Votes section -->
  <section id="votes">
    <h3>Vote for your favorite option:</h3>
    <ul id="voteOptions">
      <li data-option="Option 1">Option 1</li>
      <li data-option="Option 2">Option 2</li>
      <li data-option="Option 3">Option 3</li>
    </ul>
  </section>
</div>

<script>
  // Hardcoded users: username => password
  const users = {
    "Tissid": "51area51",
    "Raen": "0000",
    "Kova": "0000"
  };

  let currentUser = null;
  let profilePicDataURL = null;

  // Elements
  const loginOverlay = document.getElementById('loginOverlay');
  const loginBtn = document.getElementById('loginBtn');
  const loginError = document.getElementById('loginError');
  const usernameInput = document.getElementById('usernameInput');
  const passwordInput = document.getElementById('passwordInput');
  const app = document.getElementById('app');

  const menuButtons = document.querySelectorAll('#menu button');
  const sections = document.querySelectorAll('section');

  const usernameDisplay = document.getElementById('usernameDisplay');
  const messagesDiv = document.getElementById('messages');
  const messageForm = document.getElementById('messageForm');
  const messageInput = document.getElementById('messageInput');

  const pictureForm = document.getElementById('pictureForm');
  const pictureFileInput = document.getElementById('pictureFile');
  const pictureList = document.getElementById('pictureList');

  const profilePicInput = document.getElementById('profilePicInput');
  const profilePreview = document.getElementById('profilePreview');

  const voteOptions = document.getElementById('voteOptions');

  // Login handler
  loginBtn.addEventListener('click', () => {
    const user = usernameInput.value.trim();
    const pass = passwordInput.value.trim();
    if(users[user] && users[user] === pass){
      currentUser = user;
      loginOverlay.style.display = 'none';
      app.style.display = 'flex';
      usernameDisplay.textContent = `Logged in as: ${currentUser}`;
      loadProfilePic();
      scrollMessagesToBottom();
    } else {
      loginError.textContent = 'Invalid username or password';
    }
  });

  // Menu switching
  menuButtons.forEach(button => {
    button.addEventListener('click', () => {
      menuButtons.forEach(b => b.classList.remove('active'));
      button.classList.add('active');
      sections.forEach(s => s.classList.remove('active'));
      document.getElementById(button.dataset.section).classList.add('active');
    });
  });

  // Chat system (very basic)
  let messages = [];
  messageForm.addEventListener('submit', e => {
    e.preventDefault();
    const text = messageInput.value.trim();
    if(!text) return;
    const message = {user: currentUser, text};
    messages.push(message);
    appendMessage(message);
    messageInput.value = '';
  });

  function appendMessage(msg){
    const div = document.createElement('div');
    div.textContent = `${msg.user}: ${msg.text}`;
    messagesDiv.appendChild(div);
    scrollMessagesToBottom();
  }
  function scrollMessagesToBottom(){
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  // Picture posting + commenting
  let pictures = []; // {id, dataURL, comments: [{user,text}]}
  pictureForm.addEventListener('submit', e => {
    e.preventDefault();
    const file = pictureFileInput.files[0];
    if(!file){
      alert('Select an image first!');
      return;
    }
    const reader = new FileReader();
    reader.onload = () => {
      const dataURL = reader.result;
      const pic = {
        id: Date.now(),
        dataURL,
        comments: []
      };
      pictures.unshift(pic);
      renderPictures();
      pictureFileInput.value = '';
    };
    reader.readAsDataURL(file);
  });

  function renderPictures(){
    pictureList.innerHTML = '';
    pictures.forEach(pic => {
      const div = document.createElement('div');
      div.className = 'picture-item';

      const img = document.createElement('img');
      img.src = pic.dataURL;
      div.appendChild(img);

      // Comments list
      const commentsDiv = document.createElement('div');
      commentsDiv.className = 'comments';

      pic.comments.forEach(c => {
        const p = document.createElement('p');
        p.textContent = `${c.user}: ${c.text}`;
        commentsDiv.appendChild(p);
      });

      // Comment form
      const commentInput = document.createElement('input');
      commentInput.type = 'text';
      commentInput.placeholder = 'Add a comment...';
      commentsDiv.appendChild(commentInput);

      const commentBtn = document.createElement('button');
      commentBtn.textContent = 'Post';
      commentsDiv.appendChild(commentBtn);

      commentBtn.addEventListener('click', () => {
        const val = commentInput.value.trim();
        if(val){
          pic.comments.push({user: currentUser, text: val});
          renderPictures(); // rerender to update comments
        }
      });

      div.appendChild(commentsDiv);
      pictureList.appendChild(div);
    });
  }

  // Profile picture upload and preview
  profilePicInput.addEventListener('change', () => {
    const file = profilePicInput.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      profilePicDataURL = reader.result;
      profilePreview.src = profilePicDataURL;
      saveProfilePic();
    };
    reader.readAsDataURL(file);
  });

  function saveProfilePic(){
    if(currentUser && profilePicDataURL){
      localStorage.setItem(`profilePic_${currentUser}`, profilePicDataURL);
    }
  }
  function loadProfilePic(){
    if(currentUser){
      const pic = localStorage.getItem(`profilePic_${currentUser}`);
      if(pic){
        profilePicDataURL = pic;
        profilePreview.src = pic;
      } else {
        profilePreview.src = '';
      }
    }
  }

  // Voting system
  let votedOption = null;
  voteOptions.addEventListener('click', e => {
    if(e.target.tagName !== 'LI') return;
    const option = e.target.dataset.option;
    votedOption = option;
    updateVotesUI();
  });

  function updateVotesUI(){
    Array.from(voteOptions.children).forEach(li => {
      if(li.dataset.option === votedOption){
        li.classList.add('voted');
      } else {
        li.classList.remove('voted');
      }
    });
  }

</script>

</body>
</html>